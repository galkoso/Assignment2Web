### Variables
@baseUrl = http://localhost:3000

### GET Health check endpoint
GET {{baseUrl}}/health
Content-Type: application/json

### USERS

### POST Create user (username + email required)
# @name createUser
POST {{baseUrl}}/api/users
Content-Type: application/json

{
  "username": "user_{{$timestamp}}",
  "email": "user_{{$timestamp}}@example.com",
  "displayName": "John Doe",
  "bio": "Hello world"
}

### GET Get all users
# @name getAllUsers
GET {{baseUrl}}/api/users
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

### GET Get user by id
GET {{baseUrl}}/api/users/{{getAllUsers.response.body.data[0]._id}}
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

### PUT Update user (username + email required)
PUT {{baseUrl}}/api/users/{{getAllUsers.response.body.data[0]._id}}
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

{
  "username": "user_updated_{{$timestamp}}",
  "email": "user_updated_{{$timestamp}}@example.com",
  "displayName": "John Doe (Updated)",
  "bio": "Updated bio"
}

### DELETE Delete user
DELETE {{baseUrl}}/api/users/{{getAllUsers.response.body.data[0]._id}}
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

### POST Add a new post
# @name createPost
POST {{baseUrl}}/api/posts
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

{
  "title": "My First Post",
  "content": "This is the content of my first post.",
  "userId": "{{getAllUsers.response.body.data[0]._id}}",
  "publishDate": "2024-01-15T10:00:00.000Z"
}

### GET Get all posts
GET {{baseUrl}}/api/posts
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

### GET Get a post by ID
GET {{baseUrl}}/api/posts/{{createPost.response.body.data._id}}
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

### GET Get posts by sender
GET {{baseUrl}}/api/posts?userId={{getAllUsers.response.body.data[0]._id}}
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

### POST Create a new comment
# @name createComment
POST {{baseUrl}}/api/comments
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

{
  "userId": "{{getAllUsers.response.body.data[0]._id}}",
  "postId": "{{createPost.response.body.data._id}}",
  "content": "This is a great post!"
}

### GET Get a comment by ID
GET {{baseUrl}}/api/comments/{{createComment.response.body.data._id}}
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

### GET Get all comments for a specific post
GET {{baseUrl}}/api/comments/post/{{createPost.response.body.data._id}}
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

### PUT Update a comment
PUT {{baseUrl}}/api/comments/{{createComment.response.body.data._id}}
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}

{
  "content": "Updated comment content"
}

### DELETE Delete a comment
DELETE {{baseUrl}}/api/comments/{{createComment.response.body.data._id}}
Content-Type: application/json
Authorization: Bearer {{createUser.response.body.token}}